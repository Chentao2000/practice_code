# 类与对象 

### 文章梳理 （diy）：
- 面向机器的语言 
- 面向过程的语言
- 面向对象的语言

#### 面向对象编程主要体现下列三个特性：
1. 封装性
2. 继承性
3. 多态性

##### 类：
- 类是JAVA的基本元素，一个java就是由若干个类所构成的对象 
类的定义 包括两个部分 ： 类声明和类体

```
class 类名{
  类体的内容
}
```
##### 类体：
类体是抽象出一类事物共有的属性和行为
- 变量的声明
- 方法的定义

#### 方法：
方法的定义包括两部分 方法头 和 方法体
```
class 方法{
  方法体的内容
}
```

#### 成员变量与局部变量：
- 在方法体中声明的变量和方法的参数被称为局部变量 ， 在类体中声明的变量和方法的参数被称为成员变量
- 局部变量只在方法体有效，而且与其声明的位置有关。 而成员变量在整个类体都有关
- 局部变量和成员变量名字相同 ，那么成员变量被隐藏，即该成员变量在方法体内暂且失效
- 局部变量没有默认值，所以使用时必须要保证局部变量有默认值，而成员变量有默认值
- 对成员变量的操作只能放在方法体中 ， 在类中不能对成员变量进行操作 （最多就在定义时候赋初始值而已）。

#### 类的UML 图：
UML 图属于结构图：常常被用于描述一个系统的静态结构 ： 一个UML 图通常包括 `类(CLASS)的UML 图` ， `接口（interface）的UML 图` ...
- 下面给出一个长方形描述一个类的主要构成： 将长方形垂直的分成三层：
1. 第一层是名字层：如果类的名字是常规字形，表明具体的类 。 如果类的名字是斜体字形，表明该类是抽象类
2. 第二层是变量层： 也称为属性层，列出类的成员变量及类型，格式是“变量：类型” 。 在UML表示类时，可以根据设计的需要只列出最重要的成员变量的名字
3. 第三层是方法层，以称为操作层，列出该类中的方法，格式 是 方法名字 （参数列表）类型 在 UML 表示类中 ，可以根据设计只列出最重要的方法

### 构造方法和对象的创建 ：
- 类是面对对象最重要的一种数据 ，用类声明的变量 被称为 对象 ，在面对向语言中，和基本数据类型不同，在用类声明对象后，
必须创建 ，即申明的对象分配所拥有的变量（确定对象所拥有的变量）确定对象所具有的属性，当使用一个类创建一个对象时，
称给这类的一个实例，通俗来说，类是创建对象的模板，没有类就没有对象

#### 构造方法
- 构造方法是类的一种特殊方法，当程序用类创建对象时需使用它的构造方法
- 类中的构造方法的名字与它所在的类的名字完全相同，而没有类型
- 允许一个类中编写若干个构造方法，必须保证它们的参数不同。
- 如果类没有构造方法，它就会默认一个构造方法
- （ 其实可以通俗 理解： 构造方法就是与类名相同的且没有类型的 特殊函数 ）

##### 默认构造方法和自定义构造方法
-  如果类里定义一个或多个构造方法，那么JAVA不提供默认的构造方法
##### 构造方法是没有类型的 
- point(int a) & int point（） 都不是构造方法

### 创建对象 
- 创建一个对象包括对象的声明和为对象分配变量 

#### 对象的声明
- 格式为 ： 类的名字 对象的名字

#### 为声明的对象分配变量：
-  使用 new 运算符 和 类的构造方法 为声明的对象分配变量，即创造对象 ，如果类中没有构造方法，系统就会默认调用它的方法
-  默认的构造方法是无参数 ，且方法体中没有语句
-  
#####  对象的内存模型 ：
1. 声明对象的内存模型 ： 当使用 XXX 类申明一个对象是 AAAA 时 ，AAAA还没有任何数据 ，称的AAAA是一个空的对象
2. 为对象分配变量的内存模型 ： 
 new 运算符和构造方法进行运算主要做两件事情
 - 给各个变量分配名字 ，给各个类的成员变量分配内存空间 
 （ 如果成员变量在声明时没有指定初始值，所的构造方法也没有对成员变量进行初始化操作 ， 则 对于整数型变量 默认初始化 为 0 ，浮点型 0.0 boolean型  flase 引用型 null)
 - new 给每个变量分配内存后，将计算出一个称作引用的值（该值包括代表这些成员变量内存  相关的重要信息）
- 创建多个对象 ： 一个类可以通过new 创建多个对象，这些对象的变量将分配不同的内存空间 ！

#### 给出以下总结:
- new 运算符只能和类的构造方法进行运算，运算最后结果是一个十六进制的数，这个数被称为对象的引用


### 使用对象：
- 通过使用运算“ . ”(引用运算符 或 访问运算符 ) 对象可以实现对自己变量和访问方法的 

#### 对象的引用和实体 ：
- 类是体现封装的一种数据类型 （封装着对数据和对数据的操作），类所声明的对象被称为对象
- 对象（变量)负责存放引用 ，以确保对象可以操作给该对象的变量以及调用类中的方法
- 分配给对象的变量被习惯称作为对象的实体
##### 对象的引用和实体 ： 
1. 避免使用空对象 ，没有实体的对象做空对象 ，空对象不能使用
2. 一个类申明的两个对象如果具有相同的引用，二者就具有完全相同的变量
3. 垃圾收集： 一个类声明的两个对象如果具有相同的引用，那么两个就具有完全相同的实体


### 类和程序的基本结构 ：
- JAVA程序以类 作为 基本单位  ，即一个JAVA程序由若干个类构成，一个JAVA程序可以它使用的各个类分别存放在不同的源文件中，也可以将它使用的类分别存放在不同源文件中。
![JAVA](https://user-images.githubusercontent.com/68007558/156864361-a36ac96c-96c9-4659-a60e-0fddec0ef85b.jpg)

### 参数传值：
-方法中最重要的部分之一就是方法的参数，参数属于局部变量，当对象调用该方法时，参数被分配内存空间
#### 传值机制
- 所有的参数都是传值，参数变量都是指定值的拷贝，因此方法改变参数的值，不会影响向参数传值的变量的值，反之亦然（ 原件 与复印件关系）

#### 基本数据类型的参数传值：
- 向参数传递值的级别不可以高于该参数的级别 （不可以向 int 传递  float 的值， 但可以向double 型参数传递一个 float的值）
####  引用型参数传值：
- JAVA 的引用型数据包括前面学习的数组， 刚刚学习的对象以及后面要学习的接口 。
- 当参数 是引用类型时，传值 传递的变量是存放的 “引用”，而不是变量所引用的实体
- 对于两个相同类型的引用型变量 ，如果具有相同的引用，就会有相同的实体
![传值](https://user-images.githubusercontent.com/68007558/156864942-216f8024-8c78-46fa-84fe-36f17d57a0d8.jpg)


### 可变参数 ： ...
可变参数 ： 是指在申明方法时不给出参数列中从某项开始直到最后一项参数的名字和个数，但这些参数类型必须相同
```
public void f (double a ,int ... x)
```
可变参数 前一个为参数 代表，在上面↑ 方法f中，第一个参数是double  第二个至最后一个参数是 int 类型
#### FOR 的增强语句：
对于可变参数 ，JAVA也提供增强的for语句，允许使用如下方式使用for遍历参数代表所代表的参数 
```
for ( 申明循环变量 ： 参数的代表)
```

### 对象的组合 ：
- 一个类的成员变量可以是 JAVA 允许的任何数据类型，因此一个类可以将某个对象作为自己的一个成员变量。
- 如果使用这样的类创建对象，那么该对象中就会有其他对象 ↑
- 该类对象将其他对象作为自己的组成部分 ，这就是人们常说的 Has - A

#### 组合和复用：
如果对象a组合了对象b，那么对象a就可以委托对象b调用其方法，即对象a以组合的方式复用对象b的方法
- 通过组合对象来复用的方法也称为 “黑盒”复用，因为当前对象只能委托所包含的对象调用其方法调用其方法
- 当前对象随时可以更换所包含的对象，即对象与所包含对象属于弱耦合的关系
.... （此次省省略 n 图 ，有时间在狠狠剖析）


#### 类的关联关系和依赖关系的UML图
1. 关联关系 ：如果A类的成员变量是B类申明的对象 ，那么 A 和 B的关系是关联关系
![关联](https://user-images.githubusercontent.com/68007558/156865892-c74b67b1-2a4a-4319-8754-c9bf833421c3.jpg)


2. 依赖关系 : 如果A类中某个方法的参数 是 用B 类声明的对象 或某个方法返回的数据类型 是 B类对象 ，那么 A 和 B 是依赖关系 
![依赖](https://user-images.githubusercontent.com/68007558/156865894-ba1bc8ea-4e7e-4b1b-997e-18d1807d4a5b.jpg)



###  实例成员与类成员：
类体中包括成员变量的声明和方法的定义：而成员变量又可以细分为 实例变量和类变量
区别如下 
```
class DOG{
  float x ; //实例变量
  static int y ; // 类变量
}
```

#### 实例变量和类变量的区别：

##### - 不同对象的实例变量互不相同
实例对象 ： 分配给不同对象的实例变量占有不同的内存空间，改变其中一个对象实例变量不会影响其他对象的实例变量
##### -  所有对象共享类的变量
类变量 ： 当使用 new 运算符创建多个变量时，分配给这些对象这个类变量占有相同一处内存，改变其中一个对象的这个类变量会影响其他对象这个类变量，也就说，对象共享变量

##### 可以通过类名直接访问类变量
- 类变量是类相关联的变量，也就说，类变量是和该类创建所有对象 相关联的变量，改变其中一个对象这个类变量就同时改变了其他对象，这个类变量。
，因此类变量不可以通过某个对象访问过，也可以直接通过类名访问
- 实例变量仅仅是和相应的对象关联的变量，也就是说，不同的对象的实例变量，互不相同，即分配不同的内存空间，改变其中一个对象的变量不会影响其他对象这个实例变量，对象的实例变量可以通过该对象访问。但不能通过了类名访问

![共享变量](https://user-images.githubusercontent.com/68007558/156866654-982367d9-e533-44d7-b518-86641bdf23cc.jpg)


##### 实例方法和类方法的定义：
- 类中的方法可分为实例方法和类方法，方法声明时，方法类型前面不加关键字static 修饰的是实例方法， 加了就是 类方法

```
class A{
  float x ; //实例变量
  static int y ; // 类变量
  
  float max (float x)
  {}   // 实例方法
  
  static float max()
  {}  // 类方法
}
```



##### 实例方法和类方法的区别：
1. 对象调用实例方法：
 -  当类的字节码文件加载内存时，类的实例方法不会被分配入口的地址。 只有该类创建对象的时候，类中的实例子方法才分配入口地址。
 -  当再创造对象时候，便不在分配入口地址，方法的入口地址被所有的对象共享，当所有的对象不存在时，入口地址才被取消
xxxxxx
2. 类名调用类方法：
- 对于类中的类方法，在该类被加载到内存时，就分配了相应的入口地址，从而类方法仅可以被该类创建的任何对象调用执行 ，也可以直接通过类名调用。
- 类方法的入口地址直到程序退出才取消，需要注意的是，实例方法不能通过类名来调用，只能通过对象来调用
- 类方法入口地址直到程序退出才取消，需要注意的是 ，类方法不可以操作实例变量，这是因为在类创建对象之前，实例成员变量还没有分配内存

3. 设计类方法的原则：

- 对于static 方法，不必创建对象就可以用类名直接调用它，创建对象会导致类中实例变量被分配内存空间，如果一个方法不需要操作类中任何实例变量，就可以满足程序需要，考虑将这样的方法设计成一个static 方法

### 方法重载：

JAVA中存在两种多态，重载 Overload 和 重写 Override ，重写是与继承有关的多态

功能多态性 ： 是指可以向功能传递不同的消息，以便让对象 根据相应的消息来产生相应的行为。
对象的行为通过类中的方法来体现 ，那么行为的多态性就是方法的重载。

##### 方法重载的语法规则 ：

方法重载的意思是 ： 一个类中可以有多个方法具有相同的名字：但这些方法的参数可以不同，两个方法参数不同满足下列之一

1. 参数的个数不同
2. 参数个数相同，但参数列表中对应某个参数的类型不同


##### 避免重载出现歧义：

重载的方法必须保证相互参数的不同，但要小心的是，重载方法在被调用时可能出现歧义调用。
（使用重载方法时候要明确你的方法是哪一个方法，避免系统分不出来）

### this关键字
this 是 JAVA 的一个关键字，表示某个对象，this可以出现在实例方法和 构造方法中，但不可以出现在类方法中。

#### 在构造方法中使用this：

this关键字出现类的构造方法中，代表使用该构造方法所创建的对象

public class People{
  XXXXX
  
  people(){
  
  this.init() ; // 可以省略this
  init(); // 和上面同样效果
  }
  
  void init(){}
}

#### 在实例方法中使用this：

实例方法可以操作类的变量，当前实例成员变量在实例方法中出现时，默认是 

```
this.成员变量
```

```
类名.成员变量
```


例如：
```
class A {
 int x ;
 static int y;
 void f(){
   this.x = 100;  // this.成员变量
   A.y() = 200; //类名.成员变量
 }
}
```

##### 注意：

- 当实例成员变量 的名字和局部变量的名字相同时，成员变量前面的this 或 类名就不可以省略
- this 不能出现在类方法 ，这是因为类方法可以通过类名直接调用，这时还没有任何对象诞生


### 包

包是JAVA语言有效管理类的一个机制：不同JAVA源文件可能出现名字相同类，如果区分这些类，就要使用包名
包名的目的是有效地区分名字相同的类
不同的JAVA源文件中两个类相同时，它们可以通过隶属不同的包来相互区分

#### 包语句：

如果源程序省略了package语句，源文件中你说定义命名的类隐含地被认为是无名的一部分,
只要这些类字节码存放相同的目录，那它们就属于同一个包，但没有包名。

包名可以是一个合法的标识符，也可以是若干个标识符 “.”分隔而成
```
package 包名;
package sunrise;
packege sun.com.cn
```
#### 有包名类的存储目录 ：
程序如果使用了 包语句：列如
```
package tom.jiafei
```
那么存储文件的目录结构必须包含以下的结构： ...\1000\tom\jiafei
那么得到的字节文件默认的保存在当前的目录 C:\1000\tom\jiafei\源文件


#### 运行有包名的主类：

```
C: \1000 > javac tom\jiafei\源文件
```
xxxx

### 源文件：


## 小结：

1. 类是组成JAVA 源文件 的基本元素，一个源文件由若干个类组成的。
2. 类体可以有两个重要的成员：  成员变量 和 方法
3. 成员变量 分为 实例变量 和 类变量 ，类变量和该类的所有对象共享 ，不同对象的实例变量互不相同。
4. 除了构造方法外，其他方法分为实例方法和类方法，类方法不仅可以由该类的对象调用，也可以用类名调用；而实例方法必须作为由对象调用
5. 实例方法既可以操作实例变量也可以操作类变量 ，当对象调用实例方法时，方法的成员变量就是指分配给该方法该对象的成员变量，其他实例变量和其他对象的不相同，
即占有不同的内存空间，而类变量和其他对象的相同 ，即占有相同的内存空间。类方法只能操作类变量，当对象调用该类方法，方法中的成员变量一定都是类变量，也就是说
该对象和所有的对象共享类变量
6. 通过对象的组合可以实现方法的复用
7. 在编写JAVA源文件时，可以使用import语句引用有包名的类
8. 对象访问自己的变量以及调用方法受访问权限的限制


 #  问答题：
 
 1. 面对对象的有哪三个特性 ？
 2. 类名应当遵守怎么样的编程风格 ？
 3. 变量和方法的名字应当遵守怎么样的编程风格？
 4. 类体内容中声明成员变量是体现对象的属性还是行为？
 5. 类体内容中定义的非构造方法是为了体现对象的属性还是行为？
 6. 类中的实例变量在什么时候会被分配内存空间？
 7. 什么叫方法的重载？构造方法可以重载？
 8. 类中的实例方法可以操作类变量（static 变量）吗？类方法（static 方法）可以操作实例变量？
 9. 类中的实例变量可以用类名直接调用吗？
 10. 什么叫方法的重载？构造方法可以重载吗?
 11. 类中的实例方法可以操作类变量（static 变量）吗？类方法（static 方法）可以操作实例变量吗？
 12. this的关键字代表什么？this 可以出现在类方法中吗？
 
